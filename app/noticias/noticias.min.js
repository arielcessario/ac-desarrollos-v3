(function(){var b=document.getElementsByTagName("script");var c=b[b.length-1].src;angular.module("acdesarrollos.noticias",["ngRoute","ngSanitize"]).controller("NoticiasController",a);a.$inject=["$scope","$location","NoticiasService","$interval","AcUtils","$sce"];function a(o,j,e,l,g,n){var f=this;f.titulo="";f.filtro="";f.buscar=false;f.slider_1=false;f.slider_2=false;f.slider_3=false;f.slider_4=false;f.slider_5=false;f.noticias=[];f.noticias_resultado=[];f.noticia={};f.noticias_slider_1=[];f.noticias_slider_2=[];f.noticias_slider_3=[];f.noticias_slider_4=[];f.noticias_slider_5=[];f.goToNoticia=m;f.showNoticia=d;f.buscarNoticia=k;e.getNoticias(function(r){f.noticias=r;console.log(r);if(r!=null||r.length>0){for(var q=0;q<r.length;q++){var p={};p.noticia_id=r[q].noticia_id;p.titulo=r[q].titulo.length>55?r[q].titulo.substring(0,55)+"...":r[q].titulo;p.detalles=n.trustAsHtml((r[q].detalles.length>180?r[q].detalles.substring(0,180)+".....":r[q].detalles));p.fotos=r[q].fotos;p.fecha=i(r[q].fecha);if(q<3){p.slider=1;f.noticias_slider_1.push(p);f.slider_1=true}if(q>=3&&q<6){p.slider=2;f.noticias_slider_2.push(p);f.slider_2=true}if(q>=6&&q<9){p.slider=3;f.noticias_slider_3.push(p);f.slider_3=true}if(q>=9&&q<12){p.slider=4;f.noticias_slider_4.push(p);f.slider_4=true}if(q>=12&&q<15){p.slider=5;f.noticias_slider_5.push(p);f.slider_5=true}}}});f.slider_nro=1;l(h,30000);function h(){if(f.noticias_slider_5.length>0){f.slider_nro=(f.slider_nro==5)?1:f.slider_nro+1}else{if(f.noticias_slider_4.length>0){f.slider_nro=(f.slider_nro==4)?1:f.slider_nro+1}else{if(f.noticias_slider_3.length>0){f.slider_nro=(f.slider_nro==3)?1:f.slider_nro+1}else{if(f.noticias_slider_2.length>0){f.slider_nro=(f.slider_nro==2)?1:f.slider_nro+1}}}}}function m(q){for(var p=0;p<f.noticias.length;p++){if(f.noticias[p].noticia_id==q){f.noticia=f.noticias[p]}}j.path("/noticia/"+q)}function d(p){}function k(p){if(p.length>2){g.getByParams("titulo,detalles",p,"false",f.noticias,function(q){f.noticias_resultado=q;f.buscar=true})}else{f.buscar=false}}function i(p){function q(t){return(t<10)?"0"+t:t}var r=new Date(p);return[q(r.getDate()),q(r.getMonth()+1),r.getFullYear()].join("/")}}})();