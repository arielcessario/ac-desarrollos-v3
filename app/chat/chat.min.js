(function(){var a=document.getElementsByTagName("script");var b=a[a.length-1].src;angular.module("acdesarrollos.chat",["ngRoute",["mailer/mailer.js"]]).controller("ChatController",c);c.$inject=["$scope","$location","MailerService"];function c(d,j,i){var e=this;e.nombre="";e.email="";e.message="";e.chatIsLogged=false;e.enviando=false;e.idChat=0;var h=new Firebase("https://chat-acdesarrollos.firebaseio.com/");e.loginChat=f;e.sendChat=g;function f(){if(e.nombre.trim()==""){return}if(e.email.trim()==""){return}if(e.enviando){return}e.enviando=true;e.idChat=Math.floor((Math.random()*1000)+1);i.sendMailForChat(e.email,e.nombre,function(k){e.enviando=false});h.push({id:e.idChat,name:e.nombre,mail:e.email,message:e.nombre+" se ha conectado"});e.chatIsLogged=true}function g(k){if(k.keyCode==13){if(e.nombre.trim()==""){return}if(e.email.trim()==""){return}if(e.message.trim()==""){return}h.push({id:e.idChat,name:e.nombre,mail:e.email,message:e.message});e.message=""}}h.on("child_added",function(k){if(k.val().id!=e.idChat){return}var l=angular.element(document.querySelector("#message"));l.append("<p>"+k.val().name+" dice: "+k.val().message+"</p>");if(!d.$$phase){d.$apply()}})}})();