(function(){var a=document.getElementsByTagName("script");var b=a[a.length-1].src;angular.module("acdesarrollos.chat",["ngRoute"]).controller("ChatController",c);c.$inject=["$scope","$location","ContactsService"];function c(d,j,g){var e=this;e.nombre="";e.email="";e.message="";e.chatIsLogged=false;e.enviando=false;e.idChat=0;var i=new Firebase("https://chat-acdesarrollos.firebaseio.com/");e.loginChat=f;e.sendChat=h;function f(){if(e.nombre.trim()==""){return}if(e.email.trim()==""){return}if(e.enviando){return}e.enviando=true;e.idChat=Math.floor((Math.random()*1000)+1);var l="http://192.185.67.199/~arielces/ac-desarrollos-chat/";var k="Nuevo chat de "+e.nombre;g.sendMail(e.email,[{mail:"arielcessario@gmail.com"},{mail:"mmaneff@gmail.com"},{mail:"diegoyankelevich@gmail.com"}],e.nombre,l,k,function(n,m){e.enviando=false});i.push({id:e.idChat,name:e.nombre,mail:e.email,message:e.nombre+" se ha conectado"});e.chatIsLogged=true}function h(k){if(k.keyCode==13){if(e.nombre.trim()==""){return}if(e.email.trim()==""){return}if(e.message.trim()==""){return}i.push({id:e.idChat,name:e.nombre,mail:e.email,message:e.message});e.message=""}}i.on("child_added",function(k){if(k.val().id!=e.idChat){return}var l=angular.element(document.querySelector("#message"));l.append("<p>"+k.val().name+" dice: "+k.val().message+"</p>");if(!d.$$phase){d.$apply()}})}})();